---
# file: kali.yml
- hosts: kali
  become: yes
  become_method: sudo
  roles:
    # - role: PeterMosmans.virtualbox-guest
    #   tags: virtualbox
    - role: njones.kali
      tags: kali
  vars:
    - kali_packages_remove: ""
    - hostname: "njones-mwr-kali"
    - virtualbox_version: 5.1.10
    - virtualbox_x11: true
    - unnecessary_packages: ""
    - kali_directories:
        - path: /tools/
          mode: "2770"
          owner: root
          group: git
    - kali_pip_packages:
        # for analyze_hosts.py
        - python-nmap
        - requests
        - python-wappalyzer
        - scapy
        - ansible
        - cryptography
        - paramiko
        - bs4
        - sslyze
        - xlrd
    - kali_git_repositories:
        - repo: https://github.com/PeterMosmans/security-scripts
          dest: /tools/security-scripts
        - repo: https://github.com/drwetter/testssl.sh
          dest: /tools/testssl.sh
        - repo: https://github.com/PowerShellMafia/PowerSploit.git
          dest: /tools/PowerSploit
        - repo: https://github.com/danielmiessler/SecLists.git
          dest: /tools/SecLists
        - repo: https://github.com/trustedsec/egressbuster.git
          dest: /tools/egressbuster
        - repo: https://github.com/ShawnDEvans/smbmap.git
          dest: /tools/smbmap
        - repo: https://github.com/GDSSecurity/Windows-Exploit-Suggester.git
          dest: /tools/windows-exploit-suggester
        - repo: https://github.com/EmpireProject/Empire.git
          dest: /tools/empire
        - repo: https://github.com/SpiderLabs/Responder.git
          dest: /tools/responder
    - kali_binary_downloads:
        - url: http://www.ampliasecurity.com/research/wce_v1_42beta_x64.zip
          dest: /tools/binaries/wce_v1_42beta_x64.zip
        - url: http://www.ampliasecurity.com/research/wce_v1_42beta_x32.zip
          dest: /tools/binaries/wce_v1_42beta_x32.zip
        - url: http://www.oxid.it/downloads/ca_setup.exe
          dest: /tools/binaries/ca_setup.exe
    - kali_ufw_tcp_allow:
        - 22
